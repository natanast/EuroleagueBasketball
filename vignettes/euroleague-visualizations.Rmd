---
title: "Example visualizations using the euroleague data"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{euroleague-visualizations}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

## Intro

This page demonstrates quick exploratory charts you can build with the `euroleague_basketball` dataset.

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

## Import libraries

```{r setup}
library(EuroleagueBasketball)
library(ggplot2)
library(ggrepel)
library(data.table)
library(extrafont)

```

## Peek at the data

```{r}

head(EuroleagueBasketball::euroleague_basketball[, .(Team, Country, `Home city`, Arena, Capacity,
                                                     FinalFour_Appearances, Titles_Won)])


```

## Titles vs Final Four Appearances

```{r plot_titles_vs_finalfour, echo=TRUE, fig.width=7, fig.height=5}

# Convert to data.table
dt <- as.data.table(euroleague_basketball)

# Convert columns to numeric
dt[, Titles_Won_num := as.numeric(Titles_Won)]
dt[, FinalFour_num := as.numeric(FinalFour_Appearances)]

labels <- dt[FinalFour_Appearances > 0]

# Plot
ggplot(dt, aes(x = Titles_Won_num, y = FinalFour_num)) +
    
    
    geom_point(color = "#295466", size = 3) +
    
    geom_text_repel(
        data = labels,
        aes(label = Team),
        size = 3
    ) +
    
    labs(
        title = "EuroLeague Titles vs Final Four Appearances",
        x = "Titles Won",
        y = "Final Four Appearances"
     ) +
    
    theme_minimal(base_family = "Candara") +
    
    theme(
        panel.grid.major = element_line(linewidth = 0.45, color = "grey85", lineend = "round"),
        panel.grid.minor = element_line(
            linewidth = 0.35, 
            color = "grey85", 
            linetype = "dashed", 
            lineend = "round"
        ),
        
        plot.margin = margin(20, 20, 20, 20),
        
        plot.background = element_rect(fill = "grey93", color = NA)
    )
    


```

*Takeaway:* Teams with many Final Four appearances arenâ€™t always those with the most titles. For example, some teams are consistent contenders but rarely convert appearances into championships.

## Second plot
